# Домашно 2: Списъци

## Увод

В това задание трябва да реализирате функционалността нужна за програма, която симулира управление на студентски бар.

Програмата ще комуникира с потребителя през стандартния вход и изход.

Структурата от данни, която трябва да използвате в задачата е свързан списък (Linked List).

## Симулиране на студентски бар

Изследователи от Факултета по Мистични Изкуства искат да разберат интересното поведение на хората на опашка пред клуб "33Факториел". За целта те искат да имат модел, който може да симулира поведението на студентите чакащи на опашка пред заведението. Трябва да напишете програма, която моделира поведението на студенти които идват пред заведението, търсят познати и се нареждат на най-доброто място, което могат да намерят. Охраната се сърди при големи стълпотворения и не позволява събирането на големи групи. Студентите чакат на опашката на групички и влизат само ако има място за цялата група, в противен случай влиза групата която е най-близо до входа и има не повече членове от свободното място в бара. Междувременно всеки студент си е намислил дадено време за престой в клуба, след което ще си тръгне и ще иде за дюнери. От друга страна студентите са много надъхани да влязат в клуба и са готови да чакат пред него неограничено дълго.

В началото на вашата програма ще бъде подадено цяло число *K*,  което е капацитетът на клуба, както и цяло число *G*, което е максималният размер на група чакащи студенти.

След това има цяло число *N*, следвано от *N* на брой реда, всеки от които съдържа информация за студент, който идва пред клуба. За един студент имаме следните параметри:

* факултетен номер на студента - цяло, неотрицателно число с до 9 цифри;
* минута, в която е дошъл - цяло, неотрицателно число;
* специалност която учи (познава студенти само от своята специалност) - една от изброените по-долу;
* ентусиазъм за престой в клуба в брой минути - цяло, положително число.

Вашата програма трябва да прочете входните данни и да симулира поведението на студентите. За улеснение симулацията винаги започва от 0 минути и продължава докато няма хора на опашката и всички си тръгнат от клуба. Студентите могат да извършват следните действия, в дадения ред:

* Ако сега са дошли, намират най-близката до входа група с колеги от същата специалност, в която могат да се присъединят и започват да чакат там. Ако няма такава се нареждат в края на опашката и формират нова група.
* Студентите вътре в клуба, на които им е свършил ентусиазма, си тръгват от него;
* Ако е възможно влизат групите, за които има място.

На изхода вашата програма трябва да извежда по един ред всеки път, когато студент влезе или излезе от клуба. Трябва да включите следната информация:

* текущата минута;
* факултетният номер на студента;
* едно от {`enter`, `exit`}.

Ако нещата се оплетат и не можете да продължите симулацията по някаква причина трябва да съобщите това с хвърлянето на изключение от тип `std::runtime_error`.

Специалностите в университета са: Измама (Fraud), Интернационални Схеми (International Schemes), Креативен Нихилизъм (Creative Nihilism), Субективни Изследвания (Subjective Researches), Анализ на Досиета (File Analizis), Микромениджмънт (Micromanagement), Приложно Материализиране (Applied Materialization), Субективистика (Subjectivistics), Магнетизъм и Избистряне (Magnetism and Clearing).

## Примери

### Пример 1

#### Вход

    1 1 1
    17 0 Fraud 3

#### Изход

    0 17 enter
    3 17 exit

### Пример 2

#### Вход

    1 1 2
    100 0 Fraud 5
    200 0 Fraud 5

#### Изход:

    0 100 enter
    5 100 exit
    5 200 enter
    10 200 exit

### Пример 3

#### Вход

    3 2 10
    220 0 Fraud 10
    221 1 Fraud 9
    222 2 Fraud 8
    320 2 Subjectivistics 10
    410 2 Micromanagement 10
    321 3 Subjectivistics 5
    411 3 Micromanagement 10
    322 4 Subjectivistics 10
    323 4 Subjectivistics 10
    510 5 International Schemes 3

#### Изход

    0 220 enter
    1 221 enter
    2 222 enter
    10 220 exit
    10 221 exit
    10 222 exit
    10 320 enter
    10 321 enter
    10 510 enter
    13 510 exit
    15 321 exit
    15 410 enter
    15 411 enter
    20 320 exit
    25 410 exit
    25 411 exit
    25 322 enter
    25 323 enter
    35 322 exit
    35 323 exit

## Валидиране на входа

Може да считате, че подадените от потребителя данни са във валиден формат.

Трябва да реализирате проверка за валидността на стойностите на данните. Например:

* Некоректен факултетен номер или специалност;
* Заявките пристигат в некоректно (не монотонно) време;
* и други.

Ако на програмата ви бъде подаден некоректен вход, тя трябва да сигнализира за това като хвърли изключение (exception) от тип `incorrect_simulation`. Този тип е дефиниран в предоставения за домашното шаблон. Той има конструктор с единствен аргумент – символен низ описващ грешката.

## Външни библиотеки

Структурите от данни, които използвате в решението, трябва да са с ваши имплементации.

Най-вероятно, за да решите задачата ще е нужно да добавите помощни функции и/или класове. Препоръчваме ви да ги покриете с подходящи unit test-ове.

## Шаблон

В шаблона за домашното са включени отделни target-и за програмата и за библиотека, която реализира същинската симулация.

Кодът на програмата е завършен и НЕ трябва да го променяте. Той се намира в директорията [`src/application/`](template/src/application/). В нея не бива да нанасяте промени.

Кодът на библиотеката, която реализира симулацията се намира в [`src/simulator-lib/`](template/src/simulator-lib/). Това е директорията, в която трябва основно да работите. Можете да реализирате цялото си решение в предоставените файлове, но може и да добавите допълнителни, ако има нужда.

Тестовете се намират в [`test/`](template/test/). НЕ бива да променяте предоставения файл с тестове. Ако искате да добавите свои unit test-ове, създайте допълнителни файлове.

Файлът `CMakeLists.txt` в основната директория също НЕ бива да се променя.

По подразбиране CMake проектът е настроен така, че да сваля автоматично Catch2 използвайки FetchContent. За по-ефективно, препоръчваме да свалите рамката и да работите с локална версия. Това може да стане по два начина:

* Като свалите цялото съдържание на repo-то на Catch2 и го сложите в поддиректория `lib/Catch2` на проекта.
* Като свалите, предварително изградите и инсталирате Catch2 на вашия компютър така, че да може се намира с `find_package()`.

## Упътвания

Спазвайте принципа за [Single responsibility](https://en.wikipedia.org/wiki/Single-responsibility_principle). Работете с малки единици (класове/функции).

Ако отделите достатъчно време, за да можете да работите спокойно по заданието, опитайте да следвате колкото се може по-близо [TDD](https://en.wikipedia.org/wiki/Test-driven_development). Най-вероятно това ще подобри значително качеството на кода ви, а също и ще ви позволи отрано да хванете проблеми в архитектурата на решението. Ако срещате проблеми с тестването на дадена част от кода или въобще не виждате начин да я тествате, вероятно има някакъв проблем с дизайна.

Задачата е упражнение върху списък. Помислете как да реализирате поисканата функционалност с тази структура ефективно.

Спазвайте принципа за [Dependency inversion](https://en.wikipedia.org/wiki/Dependency_inversion_principle). Разчитайте на абстракции, а не на конкретна имплементация. Мислете за интерфейсите между отделните части, стремете се да намалите зависимостите от конкретна имплементация. В частност:

Вероятно ще бъде по-добре да въведете клас, който представя студент. Помислете какви операции ще са ви необходими.

## Предаване на решението

Предайте решението си като един `.zip` архив. Включете в него само това, което е нужно, за да се изгради и тества решението.

**ВАЖНО:** Напомняме, че следните НЕ ТРЯБВА да се променят и когато ги предавате трябва да съвпадат с оригиналните си версии от шаблона. Уверете се, че това е така когато предавате решението си:

* Основният `CMakeLists.txt` файл (този в основната директория);
* Файлът с предоставените в шаблона unit test-ове (`test/test-simulation.cpp`);
* Кодът на примерната програма (цялото съдържание на `src/application`).

Освен ако НЕ СТЕ добавяли допълнителни директории, архивирайте и предайте следните файлове/директории:

* `src/`
* `test/`
* `CMakeLists.txt`

Запазете структурата на шаблона. НЕ размествайте файловете, НЕ променяйте техните имена и т.н.

НЕ СЛАГАЙТЕ в архива временните файлове и директории генерирани от IDE-то, компилатора и т.н. (например `.vscode/`, `build/`, `out/` и т.н.).

**СЪВЕТ:** Би трябвало архивът да е с размер по-малък от 1MB, даже много по-малко (за тази задача вероятно ще е от порядъка на килобайти). Ако предавате архив с голям обем (например 30MB), със сигурност в него сте включили излишни неща.

След като предадете решението, за да се уверите, че всичко е оформено коректно, свалете архива от Moodle и проверете дали изграждането и тестовете преминават без грешки. За целта:

1. Свалете архива от Moodle.
1. Разархивирайте го в отделна, нова директория, например `C:\Temp\sdp-homework`.
1. Изградете решението си и пуснете тестовете. Всички стъпки трябва да преминават без грешки. Например, за директорията по-горе стъпките биха изглеждали така:

```bash
cd "C:\Temp\sdp-homework"
cmake -S . -B ./build
cmake --build ./build
ctest --test-dir ./build
```
